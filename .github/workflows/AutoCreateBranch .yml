
name: Duplicate Branch For Test Instance

# This will give manual run option
on: 
 workflow_dispatch:
   inputs:
     branch_name:
       description: 'Branch to create a duplicate'
       required: true

jobs:
  create_an_test_branch:
   runs-on: ubuntu-latest

   steps:
   # Step 1 - checkout repository
   - name: checkout repository
     uses: actions/checkout@v3

   # Step 2 - Get the current branch
   - name: get current branch
     id: get_branch
     run: |
       CURRENT_BRANCH="${{ github.event.inputs.branch_name }}"
       echo "Current branch is: $CURRENT_BRANCH"
       NEW_BRANCH="${CURRENT_BRANCH}_test"
       echo "New Branch is: $NEW_BRANCH"
       echo "NEW_BRANCH=$NEW_BRANCH" >> $GITHUB_ENV

   - name: create a new branch 
     id: create_new_branch
     run: |
       echo "Before Creating New branch is : $NEW_BRANCH"

       git config --global user.email "naren312suren@gmail.com"
       git config --global user.name "Narendar V"
       
       git checkout -b "$NEW_BRANCH"
       echo "New Branch Created Successfully"
       
   - name: merge curr branch to new branch
     id: merge_branch
     run: |
       echo "Before Merging Branches"
       CURR_BRANCH="${{ github.event.inputs.branch_name }}"
       git branch
       git checkout $CURR_BRANCH
       git branch
       
